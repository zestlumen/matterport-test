/*! For license information please see 554.06489ca60ae5ee9fbce5.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[554],{70497:(e,t,i)=>{var s;i.d(t,{X:()=>s}),function(e){e[e.Min=0]="Min",e[e.Standard=1]="Standard",e[e.High=2]="High",e[e.Detail=3]="Detail"}(s||(s={}))},32484:(e,t,i)=>{i.d(t,{yJ:()=>a});var s=i(80112),n=i(47299),o=i(14971);const a={TEXTURE_SETTINGS:n.Ay,TILEDMESH_SETTINGS:s.W,clearRaycastHits:o.Jn}},80112:(e,t,i)=>{i.d(t,{W:()=>a});var s=i(64491),n=i(75778),o=i(70497);const a={urlTemplateToken:"<file>",initialMaxLOD:o.X.Min,nonMeshMaxLOD:o.X.Standard,maxLOD:o.X.High,minLOD:o.X.Min,loadSiblings:!0,displayActiveTiles:!1,autoDisableRendererCulling:!0,optimizeRaycast:!1,stopAtEmptyTiles:!1,disableTileUpdates:!1,disposeModel:!1,limitMemoryUsage:(0,s.Fr)(),allocatedMegsBeforeLimitingLod:350,lruMinExtraTiles:(0,s.Fr)()?0:100,lruMaxTiles:800,lruUnloadPercent:.05,downloadQueueConcurrency:8,parseQueueConcurrency:10,snappingMaxLOD:o.X.Standard,errorTarget:Number((0,n.P3)("errorTarget",(0,s.Fr)()?6:4)),errorMultiplierHiddenFloors:.01,errorMultiplierRaycastOcclusion:.1,smallMeshThreshold:Number((0,n.P3)("smallMeshThreshold",40)),smallMeshErrorMultiplier:Number((0,n.P3)("smallMeshErrorMultiplier",.1))}},14971:(e,t,i)=>{i.d(t,{Jn:()=>l,rt:()=>c});var s=i(68909);const n=i(47299).Ay.sightingMaxAge,o=new s.Color;let a,r=-1;const c=(e,t,i)=>{a||(a=new s.InstancedMesh(new s.SphereGeometry(.005,8,4),new s.MeshBasicMaterial,n),a.frustumCulled=!1,h(a));const c=new s.Matrix4;return({point:s,distance:l})=>{const h=l/i.fovDistanceScale();c.makeScale(h,h,h).setPosition(s),a.setMatrixAt(++r%n,c),a.instanceMatrix.needsUpdate=!0;for(let t=n;t--;)a.setColorAt((r-t+n)%n,o.setHex(e).multiplyScalar(1-t/n));a.instanceColor&&(a.instanceColor.needsUpdate=!0),a.parent||t.scene.add(a)}},l=()=>{var e;a&&(null===(e=a.parent)||void 0===e||e.remove(a),h(a))};function h(e){const t=(new s.Matrix4).makeScale(0,0,0);for(let i=0;i<n;i++)e.setMatrixAt(i,t)}new s.Vector4(1,0,0,1),new s.Vector4(0,1,0,1),new s.Vector4(0,0,1,1),new s.Vector4(1,1,0,1),new s.Vector4(1,0,1,1),new s.Vector4(1,1,1,1),new s.Vector4(0,1,1,1),new s.Vector4(0,0,0,1)},65882:(e,t,i)=>{i.d(t,{U:()=>s});const s={longerTransitionMaxDist:10,TRANSITION_TIME_DH:650,TRANSITION_TIME_ROOM:800}},52026:(e,t,i)=>{i.d(t,{I9:()=>c,LX:()=>a});var s=i(78229),n=i(96659),o=i(65882);const a=(e,t,i,s,...n)=>r({sweepData:e,direction:t,directionFactor:i,sourceSweep:s,ignoreSweeps:n}),r=e=>{const{sweepData:t,direction:i,sourceSweep:o,ignoreSweeps:a,directionFactor:r}=e;if(!t.currentSweepObject)return[];const c=o||t.currentSweepObject,l=[s.AU(c),s.Ol(),s.xg(c),s.jW(c.position,i,r)];for(const e of a)l.push(s.AU(e));const h=[n.oW(c.position,i),n.Io(c.position)],d=t.getSweepNeighbours(c);return t.sortByScore(l,h,d)},c=(e,t,i,a)=>{const r=[s.Ol(),s.Zx()],c=[n.d$(i.point)],l=e.currentSweepObject;t&&l&&r.push(s.AU(l),s.lp(l.position,o.U.longerTransitionMaxDist),s.xg(l)),i.face&&r.push(s.DJ(i.point,i.face.normal));const h=a.floorIdFromObject(i.object);h&&c.push(n.k6(h));const d=e.sortByScore(r,c);if(0===d.length){const t=e.getClosestSweep(i.point,!0);d.push({sweep:t,score:0})}return d}},52514:(e,t,i)=>{i.d(t,{QM:()=>h,Il:()=>u,bF:()=>l});var s=i(68909),n=i(95183),o=i(19968),a=i(53172),r=i(3249),c=i(68062);var l;(0,n.Dw)({unicodeFontsURL:"https://static.matterport.com/webgl-vendors/unicode-font-resolver/1.0.1/"}),function(e){e.WORLD="world",e.NDC="ndc"}(l||(l={}));class h extends s.Object3D{constructor(e,t=l.WORLD){var i,o,a,r;super(),this.config=e,this.scaleType=t,this.unscaledWidth=0,this.unscaledHeight=0,this.labelTextMaterial=new s.MeshBasicMaterial,this.bindings=[];const c=this.config.background||this.config.backgroundAsCollider;if(c){this.config.backgroundOpacity=void 0!==this.config.backgroundOpacity?this.config.backgroundOpacity:1,this.config.backgroundOpacity=this.config.background?this.config.backgroundOpacity:0;const t=this.createQuadGeometry(),i=new s.MeshBasicMaterial({color:e.backgroundColor,transparent:!0,depthTest:this.config.backgroundOpacity>0&&!e.disableDepth,depthWrite:this.config.backgroundOpacity>0&&!e.disableDepth,opacity:this.config.backgroundOpacity,stencilRef:1,stencilFail:s.KeepStencilOp,stencilZFail:s.KeepStencilOp,stencilZPass:s.ReplaceStencilOp,stencilFunc:s.AlwaysStencilFunc,stencilWrite:!0});this.labelBackgroundMesh=new this.config.backgroundColliderType(t,i),this.labelBackgroundMesh.position.z=-.01,this.labelBackgroundMesh.name="Label Background",this.collider=this.labelBackgroundMesh,this.add(this.labelBackgroundMesh)}const h=this.labelTextMesh=new n.EY;h.material=this.labelTextMaterial,h.name="Label Text",h.text=e.text||"",h.renderOrder=10,h.font=`${null!==(i=e.assetBasePath)&&void 0!==i?i:""}${e.fontPath}`,h.lang=e.lang,h.fontSize=1,h.fontWeight=700,h.anchorX="50%",h.anchorY="50%",h.outlineWidth=e.outline?e.outlineWidth:0,h.maxWidth=e.wordWrapWidth,h.textAlign=e.align,h.depthOffset=e.depthOffset||0,c&&(h.raycast=()=>{}),h.addEventListener("synccomplete",(()=>{var e;const[t,i,s,n]=h.textRenderInfo.visibleBounds;let o=s-t,a=n-i;isFinite(o)&&isFinite(a)&&(c&&(o+=this.config.backgroundBorderWidth,a+=this.config.backgroundBorderHeight,this.labelBackgroundMesh.scale.set(o,a,1)),this.unscaledWidth=o,this.unscaledHeight=a,this.aspect=o/Math.max(a,.001),h.position.set("50%"===h.anchorX?(t+s)/-2:0,"50%"===h.anchorY?(i+n)/-2:0,0),null===(e=this._onGeomUpdate)||void 0===e||e.call(this))})),this.scaleFactor=null!==(o=e.scale)&&void 0!==o?o:1,this.opacity=null!==(a=e.opacity)&&void 0!==a?a:1,this.setColor(null!==(r=e.color)&&void 0!==r?r:new s.Color),this.add(h),h.sync(),this.name="Label Container"}dispose(){this.bindings.forEach((e=>e.cancel())),this.labelTextMesh.dispose()}onGeomUpdate(e){this._onGeomUpdate=e}get text(){return this.config.text}set text(e){this.config.text=e,this.labelTextMesh.text=e,this.labelTextMesh.sync()}get mesh(){return this.labelTextMesh}getUnscaledSize(){return{width:this.unscaledWidth,height:this.unscaledHeight}}get scaleFactor(){return this.config.scale}set scaleFactor(e){this.config.scale=e,this.scale.setScalar(e)}get opacity(){return void 0!==this.config.opacity?this.config.opacity:1}set opacity(e){if(e!==this.config.opacity){this.config.opacity=e;const t=e>0&&!this.config.disableDepth;if(this.config.background){const i=this.labelBackgroundMesh.material;i.opacity=Math.min(this.config.backgroundOpacity||1,e),i.depthWrite=e>.15,i.depthTest=t}const i=this.labelTextMaterial;i.opacity=e,i.depthTest=t,this.visible=e>0,this.labelBackgroundMesh.visible=this.visible}}setColor(e){this.labelTextMaterial.color.copy(e)}setRenderLayer(e){this.labelTextMesh.layers.mask=e.mask,this.labelBackgroundMesh&&(this.labelBackgroundMesh.layers.mask=e.mask)}setRenderOrder(e){this.renderOrder=e,this.labelTextMesh.renderOrder=e,this.labelBackgroundMesh&&(this.labelBackgroundMesh.renderOrder=e)}setPosition(e,t=e=>e){this.position.copy(t(e))}setOrientation(e,t=0){this.quaternion.copy(e),0!==t&&this.rotateZ(-t*a.fy)}scaleBillboard(e,t,i,s,n,a,h=d.SCALE_DEFAULT){if(0!==i.elements[15])this.scaleFactor=.2*h*s*(d.ORTHO_IDEAL_HEIGHT/n);else{const u=(0,o.jn)(this.position,e,t,i.asThreeMatrix4()),g=Math.abs(u.x);if(g<1){const t=(0,c.Nv)(i,e,this.position,n,h),o=((0,r.qE)(a,1,2.5)+s)*d.SCALE_ASPECT,u=1+d.SCALE_NDC-g*d.SCALE_NDC-o,p=Math.max(Math.min(1/t*u,3),.001);this.scaleType===l.NDC?this.scaleFactor=p:this.scaleFactor=Math.min(p*d.NDC_MULT,h*d.SCALE_WORLD)}else this.scaleFactor=.001}}createQuadGeometry(){const e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),t=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1]),i=new s.BufferGeometry;return i.setAttribute("position",new s.BufferAttribute(e,3)),i.setIndex([0,1,2,0,2,3]),i.setAttribute("normal",new s.BufferAttribute(t,3)),i}}const d={SCALE_DEFAULT:.1,SCALE_WORLD:4,SCALE_NDC:.5,SCALE_ASPECT:.035,DEPTH_WRITE_THRESHOD:.15,ORTHO_IDEAL_HEIGHT:1500,NDC_MULT:1.15};class u{constructor(e){this.currentTextConfig=u.defaultTextConfig,e?this.updateTextStyle(e):this.updateTextStyle(u.defaultTextConfig)}updateTextStyle(e){this.currentTextConfig=Object.assign(Object.assign({},this.currentTextConfig),e)}createLabel(e={text:""}){return new h(Object.assign(Object.assign({},this.currentTextConfig),e))}async preload(e={text:""}){const t=Object.assign(Object.assign({},this.currentTextConfig),e);return new Promise((e=>{var i;(0,n.PY)({font:`${null!==(i=t.assetBasePath)&&void 0!==i?i:""}${t.fontPath}`,characters:t.text},e)}))}static makeConfig(e){return Object.assign(Object.assign({},u.defaultTextConfig),e)}}u.defaultTextConfig={text:"",fontPath:"fonts/roboto-700.woff",align:"center",wordWrapWidth:void 0,color:new s.Color(0,0,0),backgroundColor:new s.Color(1,1,1),backgroundBorderWidth:.9,backgroundBorderHeight:.7,background:!0,backgroundAsCollider:!0,backgroundColliderType:s.Mesh,scale:1,outline:!1,outlineWidth:.06}}}]);