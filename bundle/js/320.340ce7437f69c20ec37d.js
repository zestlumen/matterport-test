/*! For license information please see 320.340ce7437f69c20ec37d.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[320],{45395:(t,e,n)=>{var i;n.d(e,{D:()=>i}),function(t){t[t.Immediate=0]="Immediate",t[t.NextFrame=1]="NextFrame",t[t.Duration=2]="Duration",t[t.Manual=3]="Manual",t[t.Debounced=4]="Debounced"}(i||(i={}))},76234:(t,e,n)=>{n.d(e,{Xw:()=>i,gj:()=>h,jz:()=>d});var i,s=n(79070),r=n(21440),o=n(244),a=n(45395);!function(t){t.added="added",t.removed="removed",t.updated="updated"}(i||(i={}));class h{constructor(t,e,n){this.index=t,this.action=e,this.diff=n}}class d{constructor(t,e){if(this.changedHandlers=[],this.awaitingInvoke=!1,this.diffRecord=[],this.targetMonitors={},this.triggerChangeHandlers=this.invokeChangeHandlers.bind(this),this.config=t,this.updatePhaseSync=e,this.config.aggregationType===a.D.NextFrame){if(!e)throw Error("UpdatePhaseSync required for NextFrame aggregation")}else{if(this.config.aggregationType===a.D.Duration)throw Error("Aggregation Type not implemented");this.config.aggregationType===a.D.Debounced&&(this.triggerChangeHandlers=(0,s.s)(this.invokeChangeHandlers.bind(this),t.aggregationDuration))}}hasDiffRecord(){return this.diffRecord.length>0}clearDiffRecord(){this.diffRecord=[];for(const t in this.targetMonitors){const e=this.targetMonitors[t];e.hasDiffRecord()&&e.clearDiffRecord()}this.awaitingInvoke=!1}onChanged(t){this.changedHandlers.push(t)}removeOnChanged(t){(0,r.Nz)(this.changedHandlers,t)}invokeCallbacks(t){if(this.changedHandlers.length>0)for(const e of this.changedHandlers)e(t)}invokeChangeHandlers(t){var e;switch(this.config.aggregationType){case a.D.Immediate:case a.D.Debounced:this.invokeCallbacks(t);break;case a.D.NextFrame:this.awaitingInvoke||(this.awaitingInvoke=!0,null===(e=this.updatePhaseSync)||void 0===e||e.after(o.R.End).then((()=>{this.awaitingInvoke&&(this.invokeCallbacks(t),this.awaitingInvoke=!1)})));case a.D.Manual:}}}},35473:(t,e,n)=>{n.d(e,{F:()=>o});var i=n(28913),s=n(76234),r=n(2391);class o extends s.jz{constructor(t,e,n){super(e,n),this.target=t;for(const i of t.keys){const s=t.get(i),o=new r.V(s,e,n);o.onChanged(this.triggerChangeHandlers),this.targetMonitors[i]=o}const o={onAdded:(t,o)=>{const a=new r.V(t,e,n);a.onChanged(this.triggerChangeHandlers),this.targetMonitors[o]=a;const h=this.diffRecord.findIndex((t=>t.index===o));-1!==h&&this.diffRecord.splice(h,1);const d=new s.gj(o,s.Xw.added,(0,i.A4)(t));-1===h&&this.diffRecord.push(d),this.triggerChangeHandlers(d)},onRemoved:(t,e)=>{delete this.targetMonitors[e];const n=this.diffRecord.findIndex((t=>t.index===e));-1!==n&&this.diffRecord.splice(n,1);const r=new s.gj(e,s.Xw.removed,(0,i.A4)(t));-1===n&&this.diffRecord.push(r),this.triggerChangeHandlers(r)}};this.target.onElementChanged(o)}commitChanges(){this.invokeCallbacks(this.getDiffRecord())}getDiffRecord(){const t=[];for(const e in this.targetMonitors){const n=this.targetMonitors[e];if(n.hasDiffRecord()){const r=n.getDiffRecord(),o=this.diffRecord.findIndex((t=>t.index===e));-1!==o?(0,i.h1)(this.diffRecord[o].diff,r):t.push(new s.gj(e,s.Xw.updated,r))}}return this.diffRecord.concat(t)}}},2391:(t,e,n)=>{n.d(e,{V:()=>h});var i=n(79070),s=n(21440),r=n(28913),o=n(244),a=n(45395);class h{constructor(t,e,n){this.updatePhaseSync=n,this.target=t,this.clearDiffRecord(),this.aggregationType=e.aggregationType,this.aggregationType===a.D.Debounced&&(this.handleAggregation=(0,i.s)(this.handleAggregation.bind(this),e.aggregationDuration||30)),this.target.onChanged((()=>{this.diffRecord=(0,r.bB)(this.originalData,(0,r.A4)(this.target),e.shallow),this.handleAggregation()})),this.changedHandlers=[]}hasDiffRecord(){return Object.keys(this.diffRecord).length>0}getDiffRecord(){return this.diffRecord}clearDiffRecord(){this.originalData=(0,r.A4)(this.target),this.diffRecord={}}onChanged(t){this.changedHandlers.push(t)}removeOnChanged(t){(0,s.Nz)(this.changedHandlers,t)}commitChanges(){this.triggerChangeHandlers(this.diffRecord)}handleAggregation(){switch(this.aggregationType){case a.D.Immediate:this.triggerChangeHandlers(this.diffRecord);break;case a.D.NextFrame:if(!this.updatePhaseSync)throw new Error("handleAggregation() -> Next frame aggregation requested, but updatePhaseSync is null");this.nextFramePromise||(this.nextFramePromise=this.updatePhaseSync.after(o.R.Begin).then((()=>{this.triggerChangeHandlers(this.diffRecord)})).finally((()=>{this.nextFramePromise=void 0})));break;case a.D.Debounced:this.triggerChangeHandlers(this.diffRecord);break;case a.D.Duration:throw new Error("AggregationType.Duration: Please implement me :)");case a.D.Manual:}}triggerChangeHandlers(t){if(this.changedHandlers.length>0)for(const e of this.changedHandlers)e(t)}}},15404:(t,e,n)=>{var i;n.d(e,{p:()=>i}),function(t){t.BLURS="blurs",t.BLUR_SUGGESTIONS="blur-suggestions",t.FLOORS="floors",t.HIGHLIGHTS="highlights",t.LABELS="labels",t.MATTERTAGS="mattertags",t.MEASUREMENTS="measurements",t.NOTES="notes",t.OBJECT_ANNOTATIONS="objectAnnotations",t.ORDERED_LISTS="orderedLists",t.PHOTOS="photos",t.PLUGINS="plugins",t.SETTINGS="settings",t.START_LOCATION="startlocation",t.SWEEPS="sweeps",t.LAYERS="layers",t.ROOM_BOUNDS="room_bounds"}(i||(i={}))},94790:(t,e,n)=>{n.d(e,{Qm:()=>a,SK:()=>s,Ve:()=>h,_w:()=>o,jF:()=>r});var i=n(92475);class s extends i.E{constructor(t,e,n,i,s=0){super(),this.position=t,this.buttons=e,this.device=n,this.ctrlKey=i,this.pointerId=s}}class r extends i.E{constructor(t,e,n,i,s,r=0){super(),this.ctrlKey=!1,this.position=t,this.clientPosition=i,this.delta=e,this.buttons=n,this.device=s,this.pointerId=r}}class o extends i.E{constructor(t,e,n,i,s,r,o=0){super(),this.ctrlKey=!1,this.position=t,this.delta=e,this.buttons=n,this.timeSinceLastMove=i,this.fullDelta=s,this.device=r,this.pointerId=o}}class a extends i.E{constructor(t,e){super(),this.position=t,this.pointer=e}}class h extends i.E{constructor(t,e,n,i){super(),this.position=t,this.startPosition=e,this.fullDelta=n,this.pointer=i}}},60043:(t,e,n)=>{n.d(e,{k:()=>s});var i=n(49586);class s extends i.T{constructor(t,e,n){super(),this.key=t,this.state=e,this.modifiers=n}}},78079:(t,e,n)=>{n.d(e,{$3:()=>o,CD:()=>r});var i=n(49586);class s extends i.T{}class r extends s{constructor(t,e,n,i,s,r,o){super(),this.id=t,this.position=e,this.clientPosition=n,this.button=i,this.down=s,this.device=r,this.nativeEvent=o}}class o extends s{constructor(t,e,n,i,s,r){super(),this.id=t,this.position=e,this.clientPosition=n,this.buttons=i,this.device=s,this.nativeEvent=r}}},90834:(t,e,n)=>{n.d(e,{O:()=>r});var i=n(84710),s=n(44351);class r extends i.B{constructor(){super(...arguments),this.name="interaction",this._source=r.defaultSource,this._mode=r.defaultMode}static get defaultMode(){return s.o.Desktop}static get defaultSource(){return s.m.None}get mode(){return this._mode}get source(){return this._source}updateSource(t){this._source=t}updateMode(t){this._mode=t}hasController(t=this.mode){return t===s.o.VrWithController||t===s.o.VrWithTrackedController}isVR(t=this.mode){return t===s.o.VrOrientOnly||t===s.o.VrWithTrackedController||t===s.o.VrWithController||t===s.o.VrTransientPointer||-1!==t.indexOf(s.o.VrUnknown)}isMobile(t=this.mode){return t===s.o.Mobile}}},6687:(t,e,n)=>{n.d(e,{aV:()=>o,c$:()=>r,f_:()=>a});var i=n(5984);const s=t=>t instanceof i.r,r=t=>s(t),o=t=>s(t)&&t.raycastEnabled&&t.visible,a=t=>{let e=t.visible;e&&t.traverseAncestors((t=>{e&&(e=t.visible)}));return!r(t)&&e||o(t)}},81530:(t,e,n)=>{n.d(e,{F:()=>s});var i=n(55141);class s extends i.u{constructor(t){super(),this.payload=t}}s.id="SAVE_COMMAND"},30443:(t,e,n)=>{n.d(e,{U7:()=>d,UX:()=>h,Wi:()=>g,h0:()=>r,jF:()=>u,nD:()=>l});var i=n(68909),s=n(81662);function r(t){if(0===t.length)throw Error("Can't merge empty list of geometries");if(1===t.length)return t[0];let e=0,n=0,s=0,r=0;const a=new i.Box3;for(const i of t)i.index&&(e+=i.index.count,n+=i.getAttribute("position").count,i.getAttribute("uv")&&(s+=i.getAttribute("uv").count),i.boundingBox&&(a.union(i.boundingBox),r++));const d=new i.BufferGeometry;r!==t.length||a.isEmpty()?d.computeBoundingBox():d.boundingBox=a,a.copy(h(d)),d.boundingSphere=a.getBoundingSphere(new i.Sphere);const c=o(new Float32Array(3*n),"position",t);d.setAttribute("position",new i.BufferAttribute(c,3));const g=function(t,e){let n=0,i=0;for(const s of e){const e=s.index;for(let s=0;s<e.array.length;s++)t[n+s]=e.array[s]+i;n+=e.array.length,i+=s.getAttribute("position").count}return t}(new Uint32Array(e),t);if(d.setIndex(new i.BufferAttribute(g,1)),s){const e=o(new Float32Array(2*s),"uv",t);d.setAttribute("uv",new i.BufferAttribute(e,2))}return d}function o(t,e,n){let i=0;for(const s of n){const n=s.getAttribute(e);t.set(n.array,i),i+=n.array.length}return t}const a=new i.Box3(s.B1.ZERO,s.B1.UNIT);function h(t){return t.boundingBox||t.computeBoundingBox(),t.boundingBox||a}function d(t,e){let n=1/0;const s=e.clone(),r=new i.Vector3,o=new i.Vector3(1/0,1/0,1/0);let a=-1;const h=new i.Triangle;return function(t,e){var n;const i=null===(n=t.index)||void 0===n?void 0:n.array,s=t.getAttribute("position");if(!s)return;const r=t.groups.length>0?t.groups:[{start:0,count:i?i.length:s.count,materialIndex:0}];let o=0;for(const t of r)for(let n=t.start;n<t.start+t.count;n+=3){let r=n,a=n+1,h=n+2;i&&(r=i[r],a=i[a],h=i[h]),e(s.getX(r),s.getY(r),s.getZ(r),s.getX(a),s.getY(a),s.getZ(a),s.getX(h),s.getY(h),s.getZ(h),o++,t.materialIndex||0)}}(t,((t,e,i,d,c,g,u,l,f,m)=>{h.a.set(t,e,i),h.b.set(d,c,g),h.c.set(u,l,f),h.closestPointToPoint(s,r);const p=s.distanceToSquared(r);p<n&&(o.copy(r),n=p,a=m)})),{point:o,distance:Math.sqrt(n),faceIndex:a}}const c=new i.PlaneGeometry(1,1);function g(){return c}const u=(t,e)=>{e=e||[];for(let t=0;t<8;t++)e[t]=e[t]||new i.Vector3;return e[0].set(t.min.x,t.min.y,t.min.z),e[1].set(t.min.x,t.max.y,t.min.z),e[2].set(t.max.x,t.max.y,t.min.z),e[3].set(t.max.x,t.min.y,t.min.z),e[4].set(t.min.x,t.min.y,t.max.z),e[5].set(t.min.x,t.max.y,t.max.z),e[6].set(t.max.x,t.max.y,t.max.z),e[7].set(t.max.x,t.min.y,t.max.z),e},l=(()=>{const t=new i.Vector3,e=new i.Vector3;return(n,s,r)=>{s=s||new i.Box3,t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(const i of n)r&&i.applyMatrix4(r),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),t.z=Math.min(t.z,i.z),e.x=Math.max(e.x,i.x),e.y=Math.max(e.y,i.y),e.z=Math.max(e.z,i.z);return s.min.copy(t),s.max.copy(e),s}})()},51666:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(25481);function s(t){if(t&&"object"==typeof t&&"x"in t&&"y"in t&&"z"in t){const e=t;return(0,i.Et)(e.x)&&(0,i.Et)(e.y)&&(0,i.Et)(e.z)}return!1}}}]);